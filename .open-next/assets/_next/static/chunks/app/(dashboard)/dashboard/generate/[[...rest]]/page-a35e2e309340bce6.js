(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1810],{78647:function(e,t,a){Promise.resolve().then(a.bind(a,610)),Promise.resolve().then(a.bind(a,75351))},610:function(e,t,a){"use strict";a.d(t,{default:function(){return O}});var l=a(57437),s=a(2265),i=a(64906),n=a(40099),r=a(22744),o=a(99376),d=a(94394);a(75351),a(74350),a(44465);var c=a(81107),u=a(34201),x=a(80611),m=a(29774);a(38387),a(35690);var p=a(96554),f=a(76417),v=a(45202),g=a(27648),h=a(63253),j=a(51817),b=a(83926),w=a(91723),N=a(4554),y=a(74767),F=a(33835),S=a(45933),C=a(82440),k=a(85130),_=a(99258),I=a(31619),T=e=>{let{userId:t}=e,[a,T]=(0,s.useState)(null),[O,E]=(0,s.useState)(null),[D,V]=(0,s.useState)(!1),[R,U]=(0,s.useState)(!1),[Z,L]=(0,s.useState)(!1),[M,P]=(0,s.useState)(!1),[J,z]=(0,s.useState)([]),[A,Q]=(0,s.useState)(null),[B,$]=(0,s.useState)(!1),[q,Y]=(0,s.useState)(""),[G,K]=(0,s.useState)(1),[H,W]=(0,s.useState)(""),[X,ee]=(0,s.useState)(0),[et,ea]=(0,s.useState)(1),[el,es]=(0,s.useState)("");(0,s.useRef)(null);let ei=(0,s.useRef)(null);(0,o.useRouter)();let{toast:en}=(0,c.pm)(),{user:er}=(0,d.aF)(),eo=(0,s.useCallback)(e=>{ev(e)},[]),{getRootProps:ed,getInputProps:ec,isDragActive:eu}=(0,F.uI)({onDrop:eo,accept:{"video/*":[".mp4",".mov",".avi",".mkv"]}}),ex=()=>{E(null),T(null),z([]),ei.current&&(ei.current.value="")},em=async(e,t)=>{U(!0);let a=new FormData;a.append("video_filepath",e);try{let e=await i.Z.post("".concat("http://23.176.184.83:5000/api/v1","/video/segmentation"),a,{headers:{"Content-Type":"multipart/form-data"}});console.log("segment response:",null==e?void 0:e.data),(null==e?void 0:e.data)&&ep(null==e?void 0:e.data,t)}catch(e){console.error("Error sending video filepath:",e),en({variant:"destructive",description:"Segmenting Video File Failed!"})}finally{U(!1)}},ep=async(e,t)=>{L(!0);let a=new FormData;a.append("segments",JSON.stringify(e)),a.append("count",JSON.parse(window.localStorage.getItem("clipCount")));try{let e=await i.Z.post("".concat("http://23.176.184.83:5000/api/v1","/video/segment_candidates"),a,{headers:{"Content-Type":"multipart/form-data"}});console.log("segment candidate response:",null==e?void 0:e.data),(null==e?void 0:e.data)&&(console.log("uploadedData?.local_video_filepath : ",t),ef(t,null==e?void 0:e.data))}catch(e){console.error("Error sending video filepath:",e),en({variant:"destructive",description:"Segmenting Candidates Failed!"})}finally{L(!1)}},ef=async(e,t)=>{z([]),P(!0);let a=new FormData;a.append("video_filepath",e),a.append("candidates",JSON.stringify(t)),a.append("user_id",null==er?void 0:er.id);try{var l,s,n,r,o,d,c,u,x,m;let e=await i.Z.post("".concat("http://23.176.184.83:5000/api/v1","/video/export"),a,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("export response:",null==e?void 0:e.data),console.log("exported paths : ",null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(l=s.details)||void 0===l?void 0:l.paths),(null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(r=o.details)||void 0===r?void 0:null===(n=r.paths)||void 0===n?void 0:n.length)>0){let t=function(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,10);return"".concat(e,"-").concat(t)}();console.log("uuid : ",t),es(t),z(null==e?void 0:null===(m=e.data)||void 0===m?void 0:null===(x=m.details)||void 0===x?void 0:x.paths),P(!1),U(!1),L(!1),E(null),Y(""),T(null),Q(null),ei.current&&(ei.current.value="")}(null==e?void 0:null===(u=e.data)||void 0===u?void 0:null===(c=u.details)||void 0===c?void 0:null===(d=c.paths)||void 0===d?void 0:d.length)===0&&(z([]),P(!1),U(!1),L(!1),E(null),Y(""),T(null),Q(null),ei.current&&(ei.current.value=""),en({variant:"destructive",title:"Exporting Clips Failed!",description:"Try uploading again"}))}catch(e){console.error("Error sending video filepath:",e),P(!1),U(!1),L(!1),E(null),T(null),Q(null),ei.current&&(ei.current.value=""),en({variant:"destructive",description:"Exporting Clips Failed!"})}},ev=async e=>{if(!e.length)return;V(!0),ee(0);try{let t=URL.createObjectURL(e[0]),a=document.createElement("video"),s=await new Promise((e,l)=>{a.preload="metadata",a.src=t,a.onloadedmetadata=()=>{console.log("video duration : ",a.duration),e(a.duration),URL.revokeObjectURL(t)},a.onerror=e=>{l("Failed to load video metadata"),URL.revokeObjectURL(t)}});if(console.log("Video Duration:",s,"seconds"),s<180){en({variant:"default",title:"Upload Failed",description:"Video is less than 3 minutes",action:(0,l.jsx)("div",{className:"!bg-[#6760f1] p-1 flex items-center justify-center rounded-full",children:(0,l.jsx)(h.I2T,{className:"!text-[#FDFFFF]"})})}),ex(),V(!1),$(!1),P(!1),U(!1),L(!1);return}}catch(e){console.error("Error checking video duration:",e),en({variant:"default",title:"Upload Failed",description:"Failed to check video duration",action:(0,l.jsx)("div",{className:"!bg-[#6760f1] p-1 flex items-center justify-center rounded-full",children:(0,l.jsx)(h.I2T,{className:"!text-[#FDFFFF]"})})}),ex();return}let t=await (0,_.b)(null==er?void 0:er.id);if(await (0,I.B)(t,null==er?void 0:er.id,"generate_clips_count",JSON.parse(window.localStorage.getItem("clipCount"))?Number(JSON.parse(window.localStorage.getItem("clipCount"))):2)){let t=setInterval(()=>{ee(e=>e>=100?(clearInterval(t),100):e+10)},3500),r=new FormData;r.append("file",e[0]),r.append("user_id",null==er?void 0:er.id);try{let e=await fetch("".concat("http://23.176.184.83:5000/api/v1","/video/upload"),{method:"POST",body:r});if(!e.ok)throw Error("Failed to upload file");let t=await e.json();if(console.log("response : ",t),t){var a,s,i,n;console.log("sending this for video segmenting : ",null==t?void 0:null===(s=t.details)||void 0===s?void 0:null===(a=s.firebase_paths)||void 0===a?void 0:a.audio_location),em("".concat(null==t?void 0:null===(i=t.details)||void 0===i?void 0:i.local_audio_filepath),null==t?void 0:null===(n=t.details)||void 0===n?void 0:n.local_video_filepath)}else en({variant:"default",description:"Failed to upload file.",action:(0,l.jsx)("div",{className:"!bg-[#6760f1] p-1 flex items-center justify-center rounded-full",children:(0,l.jsx)(h.I2T,{className:"!text-[#FDFFFF]"})})})}catch(e){console.error("Error uploading file:",e),en({variant:"default",description:"An error occurred during file upload.",action:(0,l.jsx)("div",{className:"!bg-[#6760f1] p-1 flex items-center justify-center rounded-full",children:(0,l.jsx)(h.I2T,{className:"!text-[#FDFFFF]"})})})}finally{V(!1)}}},eg=e=>/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)[A-Za-z0-9_-]+/.test(e)?"youtube":null;function eh(e){try{let t=new URL(e).searchParams.get("v");if(t)return"https://www.youtube.com/watch?v=".concat(t);throw Error("The URL does not contain a 'v' parameter.")}catch(e){return console.error("Invalid URL:",e.message),null}}let ej=async e=>{if(e.preventDefault(),(null==q?void 0:q.length)!==0){$(!0);try{let e=eg(q);if(!e){en({variant:"default",description:"Please paste a youtube url",action:(0,l.jsx)("div",{className:"!bg-[#6760f1] p-1 flex items-center justify-center rounded-full",children:(0,l.jsx)(h.I2T,{className:"!text-[#FDFFFF]"})})}),$(!1);return}if("youtube"===e){let e=new FormData;if(!eh(q)){en({variant:"default",description:"Failed to import video",action:(0,l.jsx)("div",{className:"!bg-[#6760f1] p-1 flex items-center justify-center rounded-full",children:(0,l.jsx)(h.I2T,{className:"!text-[#FDFFFF]"})})});return}e.append("url",eh(q)),e.append("user_id",null==er?void 0:er.id);let t=await fetch("".concat("http://23.176.184.83:5000/api/v1","/video/split-youtube-video"),{method:"POST",headers:{},body:e});if(!t.ok)throw Error("Failed to upload file");let a=await t.json();console.log("response : ",a),(null==a?void 0:a.success)?(console.log("video uploaded"),em("".concat(null==a?void 0:a.local_audio_filepath),null==a?void 0:a.local_video_filepath),K(G+1),$(!1)):en({variant:"default",description:"Upload Failed",action:(0,l.jsx)("div",{className:"!bg-[#6760f1] p-1 flex items-center justify-center rounded-full",children:(0,l.jsx)(h.I2T,{className:"!text-[#FDFFFF]"})})})}}catch(e){console.error("Error checking video duration:",e),en({variant:"default",description:"Upload Failed",action:(0,l.jsx)("div",{className:"!bg-[#6760f1] p-1 flex items-center justify-center rounded-full",children:(0,l.jsx)(h.I2T,{className:"!text-[#FDFFFF]"})})}),$(!1)}}};return(0,s.useEffect)(()=>{W("AI"),window.localStorage.setItem("clipCount",JSON.stringify("2"))},[]),(0,s.useEffect)(()=>{console.log("clip Count : ",et)},[et]),(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"w-[100%] 2xl:w-[70%] mx-auto gap-10 mt-4 mb-10 relative",children:[(0,l.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-white mb-2 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent flex items-center",children:"Create New Video"}),(0,l.jsx)("p",{className:"text-gray-400",children:"Import or create content from various platforms"}),(0,l.jsxs)("div",{className:"min-h-screen max-h-fit col-span-0 lg:col-span-4 2xl:col-span-4 bg-transparent px-0 rounded-2xl w-full mt-9",children:[(0,l.jsxs)(x.Tabs,{defaultValue:"create_clips",className:"w-full !bg-transparent",children:[(0,l.jsxs)(x.TabsList,{className:"w-fit bg-[#08090C] flex items-center justify-start gap-x-2",children:[(0,l.jsx)(x.TabsTrigger,{disabled:D||B||R||Z||M,value:"create_clips",className:"w-fit",onClick:()=>window.localStorage.setItem("clipCount",JSON.stringify("2")),children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2 text-sm py-1 px-1",children:[(0,l.jsx)(r.qbQ,{className:"text-[1.1rem]"}),"Upload Video"]})}),(0,l.jsx)(x.TabsTrigger,{disabled:D||B||R||Z||M,value:"youtube_import",className:"w-fit",onClick:()=>window.localStorage.setItem("clipCount",JSON.stringify("2")),children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2 text-sm py-1 px-1",children:[(0,l.jsx)(f.cKP,{className:"text-[1.1rem]"}),"YouTube Import"]})})]}),(0,l.jsx)(x.TabsContent,{value:"create_clips",children:(0,l.jsxs)("div",{...ed(),className:"relative group cursor-pointer transform transition-all duration-200 mt-9 ".concat(eu?"border-indigo-500 ring-2 ring-indigo-500/20":"border-white/5"),children:[(0,l.jsx)("input",{disabled:D||R||Z||M,...ec()}),(0,l.jsx)("div",{className:"p-8 bg-black/20 backdrop-blur-sm rounded-xl hover:bg-black/30 transition-all border-[3px] border-dashed border-white/10 min-h-[240px] flex items-center justify-center",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-6 max-w-xl mx-auto text-center",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-indigo-600/20 rounded-xl flex items-center justify-center group-hover:bg-indigo-600/30 transition-all",children:D||R||Z||M?(0,l.jsx)(j.Z,{className:"w-8 h-8 text-indigo-400 animate-spin"}):(0,l.jsx)(b.Z,{className:"w-8 h-8 text-indigo-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-xl font-medium text-white mb-2",children:[D&&"Uploading...",R&&"Spliting Video...",Z&&"Making Shorts...",M&&"Exporting Clips...",!D&&!R&&!Z&&!M&&"Drop your video here"]}),(0,l.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:D||R||Z||M?"".concat(X,"% complete"):"Upload your video files to create engaging short-form content automatically"}),(0,l.jsx)("div",{className:"w-full flex items-center justify-center mb-6",children:(0,l.jsxs)(C.Ph,{disabled:D||B||R||Z||M,required:!0,onValueChange:e=>{window.localStorage.setItem("clipCount",JSON.stringify(e))},children:[(0,l.jsx)(C.i4,{className:"w-[90%] sm:w-[400px] !border-none border-gray-500/20 !bg-[#333]/20 !text-white",children:(0,l.jsx)(C.ki,{placeholder:"Max Clip Count",className:"!text-white/40 !text-xs"})}),(0,l.jsx)(C.Bw,{className:"!bg-[#101012] !border-none",children:(0,l.jsxs)(C.DI,{children:[(0,l.jsx)(C.n5,{className:"!text-neutral-100",children:"Max Clip Count"}),(0,l.jsx)(C.Ql,{value:"2",className:"!w-full !flex !items-center !gap-x-2 !justify-between !text-neutral-100 focus:!text-black hover:!text-black",children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-x-4",children:[(0,l.jsx)("span",{children:"Max Clip 2"}),(0,l.jsx)(k.e$1,{className:"text-lg"}),(0,l.jsx)("span",{className:"!text-xs font-semibold",children:"(Est. 3 min)"})]})}),(0,l.jsx)(C.Ql,{value:"3",className:"!w-full !flex !items-center !gap-x-2 !justify-between !text-neutral-100 focus:!text-black hover:!text-black",children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-x-4",children:[(0,l.jsx)("span",{children:"Max Clip 3"}),(0,l.jsx)(k.e$1,{className:"text-lg"}),(0,l.jsx)("span",{className:"!text-xs font-semibold",children:"(Est. 4 min)"})]})}),(0,l.jsx)(C.Ql,{value:"5",className:"!w-full !flex !items-center !gap-x-2 !justify-between !text-neutral-100 focus:!text-black hover:!text-black",children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-x-4",children:[(0,l.jsx)("span",{children:"Max Clip 5"}),(0,l.jsx)(k.e$1,{className:"text-lg"}),(0,l.jsx)("span",{className:"!text-xs font-semibold",children:"(Est. 5 min)"})]})}),(0,l.jsx)(C.Ql,{value:"10",className:"!w-full !flex !items-center !gap-x-2 !justify-between !text-neutral-100 focus:!text-black hover:!text-black",children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-x-4",children:[(0,l.jsx)("span",{children:"Max Clip 10"}),(0,l.jsx)(k.e$1,{className:"text-lg"}),(0,l.jsx)("span",{className:"!text-xs font-semibold",children:"(Est. 7 min)"})]})})]})})]})}),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-500",children:[(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)(b.Z,{className:"w-4 h-4 mr-1"})," MP4, MOV"]}),(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)(w.Z,{className:"w-4 h-4 mr-1"})," Any Duration"]}),(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)(N.Z,{className:"w-4 h-4 mr-1"})," Up to 100MB"]})]}),!D&&(0,l.jsx)("div",{className:"flex gap-3 justify-center",children:(0,l.jsxs)(S.z,{size:"default",variant:"outline",className:"border-white/10 text-gray-400 hover:text-white bg-transparent hover:bg-white/10",children:[(0,l.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Browse Files"]})})]})]})]})})]})}),(0,l.jsx)(x.TabsContent,{value:"youtube_import",children:(0,l.jsx)("div",{className:"w-full mt-9",children:(0,l.jsx)(u.Z,{isImportingSocialVideo:B||R||Z||M,setIsImportingSocialVideo:$,socialVideoLink:q,setSocialVideoLink:Y,handleSocialVideoImport:ej,icon:(0,l.jsx)(y.Z,{className:"w-8 h-8 text-red-400"})})})})]}),(null==J?void 0:J.length)>0&&!B&&!M&&!R&&!Z&&!D&&(0,l.jsxs)("div",{className:"mt-6 mb-10",children:[(0,l.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-2 text-[#FDFFFF]/80 text-lg font-semibold",children:[(0,l.jsx)(v.p8R,{className:"text-[1.3rem]"}),"Generated Shorts"]}),(0,l.jsx)("button",{onClick:()=>ex(),className:"border-2 border-neutral-500/20 text-[#676d74] text-xs px-2 py-1 rounded-lg",children:"Generate More"})]}),(0,l.jsx)("div",{children:(0,l.jsx)(n.Z,{socialExportedVideoRenderKey:G,videoPaths:J,quota_type:"generate_clips_count",generatedCounts:Number(JSON.parse(window.localStorage.getItem("clipCount"))),groupId:el})})]}),M&&(0,l.jsxs)("div",{className:"w-full mx-auto grid grid-cols-1 lg:grid-cols-4 2xl:grid-cols-4 gap-x-4 gap-y-4 mt-2",children:[(0,l.jsx)(m.O,{className:"w-full h-[300px] bg-gray-500/10 flex items-center justify-center",children:(0,l.jsx)(m.O,{className:"bg-gray-400/20 w-[50px] h-[50px] rounded-lg"})}),(0,l.jsx)(m.O,{className:"w-full h-[300px] bg-gray-500/10 flex items-center justify-center",children:(0,l.jsx)(m.O,{className:"bg-gray-400/20 w-[50px] h-[50px] rounded-lg"})}),(0,l.jsx)(m.O,{className:"w-full h-[300px] bg-gray-500/10 flex items-center justify-center",children:(0,l.jsx)(m.O,{className:"bg-gray-400/20 w-[50px] h-[50px] rounded-lg"})}),(0,l.jsx)(m.O,{className:"w-full h-[300px] bg-gray-500/10 flex items-center justify-center",children:(0,l.jsx)(m.O,{className:"bg-gray-400/20 w-[50px] h-[50px] rounded-lg"})})]}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-2 text-[#FDFFFF]/80 text-lg font-semibold",children:[(0,l.jsx)(N.Z,{}),"Community Creations"]}),(0,l.jsx)(g.default,{href:"/dashboard/public",className:"border-2 border-neutral-500/20 text-[#676d74] text-xs px-2 py-1 rounded-lg",children:"View All"})]}),(0,l.jsx)(p.Z,{})]})]})]})})},O=e=>{let{userId:t}=e,[a,i]=(0,s.useState)("");return(0,l.jsx)("div",{children:(0,l.jsx)(T,{userId:t})})}},80611:function(e,t,a){"use strict";a.r(t),a.d(t,{Tabs:function(){return r},TabsContent:function(){return c},TabsList:function(){return o},TabsTrigger:function(){return d}});var l=a(57437),s=a(2265),i=a(87066),n=a(37062);let r=i.fC,o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(i.aV,{ref:t,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-neutral-100 p-1 text-gray-400 dark:bg-neutral-800 dark:text-neutral-400",a),...s})});o.displayName=i.aV.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(i.xz,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[#4F46E5] data-[state=active]:text-white data-[state=active]:shadow dark:ring-offset-neutral-950 dark:focus-visible:ring-neutral-300 dark:data-[state=active]:bg-neutral-950 dark:data-[state=active]:text-neutral-50",a),...s})});d.displayName=i.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(i.VY,{ref:t,className:(0,n.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 dark:ring-offset-neutral-950 dark:focus-visible:ring-neutral-300",a),...s})});c.displayName=i.VY.displayName}},function(e){e.O(0,[4003,8310,7240,7699,7259,614,6051,3665,1779,9212,6305,4394,2263,2972,7188,4344,6700,1866,3489,4307,8432,742,1172,2971,2117,1744],function(){return e(e.s=78647)}),_N_E=e.O()}]);